Fix possible signed integer overflow when handling slices.
