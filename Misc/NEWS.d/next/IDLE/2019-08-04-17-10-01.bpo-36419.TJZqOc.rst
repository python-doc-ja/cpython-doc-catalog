IDLE - Refactor autocompete and improve testing.
